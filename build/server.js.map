{"version":3,"sources":["/home/bohdan/Desktop/sheep-music/sheep-music-web/webpack/bootstrap","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"graphql\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"sequelize\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/config.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"react\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"prop-types\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"redux\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"react-dom/server\"","webpack:///./src/routes/error/ErrorPage.css?b874","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"node-fetch\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"./chunk-manifest.json\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"passport\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"express-jwt\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"body-parser\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"express\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"isomorphic-style-loader/lib/withStyles\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"util\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"redux-thunk\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"universal-router\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"passport-facebook\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"serialize-javascript\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"react-redux\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"pretty-error\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"jsonwebtoken\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"express-graphql\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"cookie-parser\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"path\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/node_modules/isomorphic-style-loader/lib/insertCss.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/node_modules/css-loader/lib/css-base.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/components/App.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/components/Html.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/routes/error/ErrorPage.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/createFetch.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/sequelize.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/models/User.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/models/UserLogin.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/models/UserClaim.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/models/UserProfile.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/models/index.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/passport.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/routes/index.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/queries/news.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/router.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/queries/me.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/types/UserType.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/types/NewsItemType.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/data/schema.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/constants/index.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/reducers/index.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/reducers/user.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/reducers/runtime.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/store/createHelpers.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/store/logger/logger.server.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/store/configureStore.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/server.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/actions/runtime.js","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"redux-devtools-extension/developmentOnly\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"babel-runtime/helpers/slicedToArray\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"babel-runtime/core-js/json/stringify\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/src/routes/error/ErrorPage.css","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"@babel/polyfill\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"classnames\"","/home/bohdan/Desktop/sheep-music/sheep-music-web/external \"history/createBrowserHistory\""],"names":["installedModules","installedChunks","9","__webpack_require__","moduleId","exports","module","i","l","modules","call","e","chunkId","chunk","require","0","1","2","3","4","5","6","7","8","moreModules","chunkIds","ids","length","Promise","all","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","oe","err","process","nextTick","w","s","port","env","WEB_PORT","trustProxy","TRUST_PROXY","api","clientUrl","API_CLIENT_URL","serverUrl","API_SERVER_URL","concat","databaseUrl","DATABASE_URL","analytics","googleTrackingId","GOOGLE_TRACKING_ID","auth","jwt","secret","JWT_SECRET","facebook","id","FACEBOOK_APP_ID","FACEBOOK_APP_SECRET","google","GOOGLE_CLIENT_ID","GOOGLE_CLIENT_SECRET","twitter","key","TWITTER_CONSUMER_KEY","TWITTER_CONSUMER_SECRET","content","insertCss","locals","_getContent","_getCss","toString","_insertCss","options","_stringify2","_interopRequireDefault","_slicedToArray3","obj","default","prefix","inserted","styles","str","_ref","arguments","undefined","_ref$replace","replace","_ref$prepend","prepend","_styles$i","css","media","sourceMap","push","elem","document","getElementById","create","createElement","setAttribute","cssText","btoa","encodeURIComponent","match","p1","String","fromCharCode","file","textContent","styleSheet","head","insertBefore","childNodes","appendChild","forEach","parentNode","removeChild","bind","useSourceMap","list","this","map","item","cssMapping","sourceMapping","unescape","JSON","stringify","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","App_ContextType","App_objectSpread","external_prop_types_default","a","func","isRequired","fetch","pathname","string","query","external_react_redux_","childContextTypes","App_App","external_react_default","PureComponent","props","context","Children","only","children","components_App","Html_jsx","charSet","httpEquiv","rel","href","src","async","defer","Html_Html","Component","_props","title","description","scripts","app","className","lang","Html_ref","Html_ref2","Html_ref3","script","as","Html_ref4","Html_ref5","style","dangerouslySetInnerHTML","__html","external_serialize_javascript_default","config_default","Html_ref6","components_Html","ErrorPage_jsx","ErrorPage_ErrorPage","ErrorPage_ref","error","withStyles_default","ErrorPage_default","src_createFetch","baseUrl","cookie","schema","graphql","defaults","method","mode","credentials","headers","createFetch_objectSpread","Accept","Content-Type","Cookie","regeneratorRuntime","mark","_callee","url","isGraphQL","result","wrap","_context","prev","next","startsWith","parse","body","request","variables","sent","abrupt","resolve","status","errors","json","stop","_ref2","_x","_x2","apply","data_sequelize","external_sequelize_default","define","freezeTableName","models_User","type","UUID","defaultValue","UUIDV1","primaryKey","email","STRING","validate","isEmail","emailConfirmed","BOOLEAN","indexes","fields","models_UserLogin","models_UserClaim","models_UserProfile","userId","displayName","picture","gender","location","website","hasMany","foreignKey","onUpdate","onDelete","hasOne","models","sync","external_passport_default","use","external_passport_facebook_","clientID","clientSecret","callbackURL","profileFields","passReqToCallback","req","accessToken","refreshToken","profile","done","user","users","_user","_user2","findOne","attributes","where","_json","logins","claims","include","model","findAll","$logins.name$","$logins.key$","required","plain","fooBar","catch","_action","passport","news_lastFetchTask","src_routes","path","load","then","action","route","router","external_universal_router_default","resolveRoute","params","queries_me","external_graphql_","types_NewsItemType","link","author","pubDate","news_items","news_lastFetchTime","Date","queries_news","external_node_fetch_default","response","data","items","data_schema","me","news","SET_RUNTIME_VARIABLE","reducers","external_redux_","state","runtime","runtime_objectSpread","runtime_defineProperty","payload","createGraphqlRequest","_graphqlRequest","fetchConfig","resp","Error","statusText","configureStore_configureStore","initialState","helpersConfig","enhancer","helpers","history","graphqlRequest","middleware","external_redux_thunk_default","withExtraArgument","applyMiddleware","on","reason","console","exit","global","navigator","userAgent","server_app","external_express_default","set","static","external_path_default","__dirname","external_cookie_parser_default","external_body_parser_default","urlencoded","extended","external_express_jwt_default","credentialsRequired","getToken","cookies","id_token","res","external_express_jwt_","clearCookie","initialize","authenticate","scope","session","failureRedirect","token","external_jsonwebtoken_default","sign","expiresIn","maxAge","httpOnly","redirect","external_express_graphql_default","graphiql","rootValue","pretty","store","addChunk","html","Set","_len","Array","_key","add","dispatch","now","storeSubscription","server_objectSpread","server_default","renderToString","server_jsx","component","server_toConsumableArray","external_chunk_manifest_json_default","asset","chunks","from","apiUrl","getState","renderToStaticMarkup","send","t0","_x3","server_pe","external_pretty_error_default","skipNodeFiles","skipPackage","render","message","stack","listen","info","__webpack_exports__"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t9: 0\n \t};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// require() chunk loading for javascript\n\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./chunks/\" + ({\"0\":\"about~admin~contact~home~login~not-found~privacy~register\",\"1\":\"not-found\",\"2\":\"admin\",\"3\":\"privacy\",\"4\":\"about\",\"5\":\"register\",\"6\":\"login\",\"7\":\"contact\",\"8\":\"home\"}[chunkId]||chunkId) + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// uncaught error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using import().catch()\n \t\t});\n \t};\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n","module.exports = require(\"graphql\");","module.exports = require(\"sequelize\");","/* eslint-disable max-len */\n\nif (process.env.BROWSER) {\n  throw new Error(\n    'Do not import `config.js` from inside the client-side code.',\n  );\n}\n\nmodule.exports = {\n  // Node.js app\n  port: process.env.WEB_PORT || 3000,\n\n  // https://expressjs.com/en/guide/behind-proxies.html\n  trustProxy: process.env.TRUST_PROXY || 'loopback',\n\n  // API Gateway\n  api: {\n    // API URL to be used in the client-side code\n    clientUrl: process.env.API_CLIENT_URL || '',\n    // API URL to be used in the server-side code\n    serverUrl:\n      process.env.API_SERVER_URL ||\n      `http://localhost:${process.env.WEB_PORT || 3000}`,\n  },\n\n  // Database\n  databaseUrl: process.env.DATABASE_URL || 'sqlite:database.sqlite',\n\n  // Web analytics\n  analytics: {\n    // https://analytics.google.com/\n    googleTrackingId: process.env.GOOGLE_TRACKING_ID, // UA-XXXXX-X\n  },\n\n  // Authentication\n  auth: {\n    jwt: { secret: process.env.JWT_SECRET || 'React Starter Kit' },\n\n    // https://developers.facebook.com/\n    facebook: {\n      id: process.env.FACEBOOK_APP_ID || '186244551745631',\n      secret:\n        process.env.FACEBOOK_APP_SECRET || 'a970ae3240ab4b9b8aae0f9f0661c6fc',\n    },\n\n    // https://cloud.google.com/console/project\n    google: {\n      id:\n        process.env.GOOGLE_CLIENT_ID ||\n        '251410730550-ahcg0ou5mgfhl8hlui1urru7jn5s12km.apps.googleusercontent.com',\n      secret: process.env.GOOGLE_CLIENT_SECRET || 'Y8yR9yZAhm9jQ8FKAL8QIEcd',\n    },\n\n    // https://apps.twitter.com/\n    twitter: {\n      key: process.env.TWITTER_CONSUMER_KEY || 'Ie20AZvLJI2lQD5Dsgxgjauns',\n      secret:\n        process.env.TWITTER_CONSUMER_SECRET ||\n        'KTZ6cxoKnEakQCeSpZlaUCJWGAlTEBJj0y2EMkUBujA7zWSvaQ',\n    },\n  },\n};\n","module.exports = require(\"react\");","module.exports = require(\"prop-types\");","module.exports = require(\"redux\");","module.exports = require(\"react-dom/server\");","\n    var content = require(\"!!../../../node_modules/css-loader/index.js??ref--5-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--5-rules-3!./ErrorPage.css\");\n    var insertCss = require(\"!../../../node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.id, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--5-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--5-rules-3!./ErrorPage.css\", function() {\n        content = require(\"!!../../../node_modules/css-loader/index.js??ref--5-rules-2!../../../node_modules/postcss-loader/lib/index.js??ref--5-rules-3!./ErrorPage.css\");\n\n        if (typeof content === 'string') {\n          content = [[module.id, content, '']];\n        }\n\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  ","module.exports = require(\"node-fetch\");","module.exports = require(\"./chunk-manifest.json\");","module.exports = require(\"passport\");","module.exports = require(\"express-jwt\");","module.exports = require(\"body-parser\");","module.exports = require(\"express\");","module.exports = require(\"isomorphic-style-loader/lib/withStyles\");","module.exports = require(\"util\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"universal-router\");","module.exports = require(\"passport-facebook\");","module.exports = require(\"serialize-javascript\");","module.exports = require(\"react-redux\");","module.exports = require(\"pretty-error\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"express-graphql\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"path\");","'use strict';\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Isomorphic CSS style loader for Webpack\n *\n * Copyright © 2015-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nvar prefix = 's';\nvar inserted = {};\n\n// Base64 encoding and decoding - The \"Unicode Problem\"\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding#The_Unicode_Problem\nfunction b64EncodeUnicode(str) {\n  return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode('0x' + p1);\n  }));\n}\n\n/**\n * Remove style/link elements for specified node IDs\n * if they are no longer referenced by UI components.\n */\nfunction removeCss(ids) {\n  ids.forEach(function (id) {\n    if (--inserted[id] <= 0) {\n      var elem = document.getElementById(prefix + id);\n      if (elem) {\n        elem.parentNode.removeChild(elem);\n      }\n    }\n  });\n}\n\n/**\n * Example:\n *   // Insert CSS styles object generated by `css-loader` into DOM\n *   var removeCss = insertCss([[1, 'body { color: red; }']]);\n *\n *   // Remove it from the DOM\n *   removeCss();\n */\nfunction insertCss(styles) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === undefined ? false : _ref$replace,\n      _ref$prepend = _ref.prepend,\n      prepend = _ref$prepend === undefined ? false : _ref$prepend;\n\n  var ids = [];\n  for (var i = 0; i < styles.length; i++) {\n    var _styles$i = (0, _slicedToArray3.default)(styles[i], 4),\n        moduleId = _styles$i[0],\n        css = _styles$i[1],\n        media = _styles$i[2],\n        sourceMap = _styles$i[3];\n\n    var id = moduleId + '-' + i;\n\n    ids.push(id);\n\n    if (inserted[id]) {\n      if (!replace) {\n        inserted[id]++;\n        continue;\n      }\n    }\n\n    inserted[id] = 1;\n\n    var elem = document.getElementById(prefix + id);\n    var create = false;\n\n    if (!elem) {\n      create = true;\n\n      elem = document.createElement('style');\n      elem.setAttribute('type', 'text/css');\n      elem.id = prefix + id;\n\n      if (media) {\n        elem.setAttribute('media', media);\n      }\n    }\n\n    var cssText = css;\n    if (sourceMap && typeof btoa === 'function') {\n      // skip IE9 and below, see http://caniuse.com/atob-btoa\n      cssText += '\\n/*# sourceMappingURL=data:application/json;base64,' + b64EncodeUnicode((0, _stringify2.default)(sourceMap)) + '*/';\n      cssText += '\\n/*# sourceURL=' + sourceMap.file + '?' + id + '*/';\n    }\n\n    if ('textContent' in elem) {\n      elem.textContent = cssText;\n    } else {\n      elem.styleSheet.cssText = cssText;\n    }\n\n    if (create) {\n      if (prepend) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n      } else {\n        document.head.appendChild(elem);\n      }\n    }\n  }\n\n  return removeCss.bind(null, ids);\n}\n\nmodule.exports = insertCss;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Provider as ReduxProvider } from 'react-redux';\n\nconst ContextType = {\n  // Enables critical path CSS rendering\n  // https://github.com/kriasoft/isomorphic-style-loader\n  insertCss: PropTypes.func.isRequired,\n  // Universal HTTP client\n  fetch: PropTypes.func.isRequired,\n  pathname: PropTypes.string.isRequired,\n  query: PropTypes.object,\n  // Integrate Redux\n  // http://redux.js.org/docs/basics/UsageWithReact.html\n  ...ReduxProvider.childContextTypes,\n};\n\n/**\n * The top-level React component setting context (global) variables\n * that can be accessed from all the child components.\n *\n * https://facebook.github.io/react/docs/context.html\n *\n * Usage example:\n *\n *   const context = {\n *     history: createBrowserHistory(),\n *     store: createStore(),\n *   };\n *\n *   ReactDOM.render(\n *     <App context={context}>\n *       <Layout>\n *         <LandingPage />\n *       </Layout>\n *     </App>,\n *     container,\n *   );\n */\nclass App extends React.PureComponent {\n  static propTypes = {\n    context: PropTypes.shape(ContextType).isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  static childContextTypes = ContextType;\n\n  getChildContext() {\n    return this.props.context;\n  }\n\n  render() {\n    // NOTE: If you need to add or modify header, footer etc. of the app,\n    // please do that inside the Layout component.\n    return React.Children.only(this.props.children);\n  }\n}\n\nexport default App;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport serialize from 'serialize-javascript';\nimport config from '../config';\n\n/* eslint-disable react/no-danger */\n\nclass Html extends React.Component {\n  static propTypes = {\n    title: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    styles: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.string.isRequired,\n        cssText: PropTypes.string.isRequired,\n      }).isRequired,\n    ),\n    scripts: PropTypes.arrayOf(PropTypes.string.isRequired),\n    app: PropTypes.object, // eslint-disable-line\n    children: PropTypes.string.isRequired,\n  };\n\n  static defaultProps = {\n    styles: [],\n    scripts: [],\n  };\n\n  render() {\n    const { title, description, styles, scripts, app, children } = this.props;\n    return (\n      <html className=\"no-js\" lang=\"en\">\n        <head>\n          <meta charSet=\"utf-8\" />\n          <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\n          <title>{title}</title>\n          <meta name=\"description\" content={description} />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n          {scripts.map(script => (\n            <link key={script} rel=\"preload\" href={script} as=\"script\" />\n          ))}\n          <link rel=\"manifest\" href=\"/site.webmanifest\" />\n          <link rel=\"apple-touch-icon\" href=\"/icon.png\" />\n          {styles.map(style => (\n            <style\n              key={style.id}\n              id={style.id}\n              dangerouslySetInnerHTML={{ __html: style.cssText }}\n            />\n          ))}\n        </head>\n        <body>\n          <div id=\"app\" dangerouslySetInnerHTML={{ __html: children }} />\n          <script\n            dangerouslySetInnerHTML={{ __html: `window.App=${serialize(app)}` }}\n          />\n          {scripts.map(script => <script key={script} src={script} />)}\n          {config.analytics.googleTrackingId && (\n            <script\n              dangerouslySetInnerHTML={{\n                __html:\n                  'window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;' +\n                  `ga('create','${\n                    config.analytics.googleTrackingId\n                  }','auto');ga('send','pageview')`,\n              }}\n            />\n          )}\n          {config.analytics.googleTrackingId && (\n            <script\n              src=\"https://www.google-analytics.com/analytics.js\"\n              async\n              defer\n            />\n          )}\n        </body>\n      </html>\n    );\n  }\n}\n\nexport default Html;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from 'isomorphic-style-loader/lib/withStyles';\nimport s from './ErrorPage.css';\n\nclass ErrorPage extends React.Component {\n  static propTypes = {\n    error: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      message: PropTypes.string.isRequired,\n      stack: PropTypes.string.isRequired,\n    }),\n  };\n\n  static defaultProps = {\n    error: null,\n  };\n\n  render() {\n    if (__DEV__ && this.props.error) {\n      return (\n        <div>\n          <h1>{this.props.error.name}</h1>\n          <pre>{this.props.error.stack}</pre>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <h1>Error</h1>\n        <p>Sorry, a critical error occurred on this page.</p>\n      </div>\n    );\n  }\n}\n\nexport { ErrorPage as ErrorPageWithoutStyle };\nexport default withStyles(s)(ErrorPage);\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/* @flow */\n\nimport type { graphql as graphqType, GraphQLSchema } from 'graphql';\n\ntype Fetch = (url: string, options: ?any) => Promise<any>;\n\ntype Options = {\n  baseUrl: string,\n  cookie?: string,\n  schema?: GraphQLSchema,\n  graphql?: graphqType,\n};\n\n/**\n * Creates a wrapper function around the HTML5 Fetch API that provides\n * default arguments to fetch(...) and is intended to reduce the amount\n * of boilerplate code in the application.\n * https://developer.mozilla.org/docs/Web/API/Fetch_API/Using_Fetch\n */\nfunction createFetch(\n  fetch: Fetch,\n  { baseUrl, cookie, schema, graphql }: Options,\n) {\n  // NOTE: Tweak the default options to suite your application needs\n  const defaults = {\n    method: 'POST', // handy with GraphQL backends\n    mode: baseUrl ? 'cors' : 'same-origin',\n    credentials: baseUrl ? 'include' : 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      ...(cookie ? { Cookie: cookie } : null),\n    },\n  };\n\n  return async (url: string, options: any) => {\n    const isGraphQL = url.startsWith('/graphql');\n    if (schema && graphql && isGraphQL) {\n      // We're SSR, so route the graphql internal to avoid latency\n      const query = JSON.parse(options.body);\n      const result = await graphql(\n        schema,\n        query.query,\n        { request: {} }, // fill in request vars needed by graphql\n        null,\n        query.variables,\n      );\n      return Promise.resolve({\n        status: result.errors ? 400 : 200,\n        json: () => Promise.resolve(result),\n      });\n    }\n\n    return isGraphQL || url.startsWith('/api')\n      ? fetch(`${baseUrl}${url}`, {\n          ...defaults,\n          ...options,\n          headers: {\n            ...defaults.headers,\n            ...(options && options.headers),\n          },\n        })\n      : fetch(url, options);\n  };\n}\n\nexport default createFetch;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport Sequelize from 'sequelize';\nimport config from '../config';\n\nconst sequelize = new Sequelize(config.databaseUrl, {\n  define: {\n    freezeTableName: true,\n  },\n});\n\nexport default sequelize;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst User = Model.define(\n  'User',\n  {\n    id: {\n      type: DataType.UUID,\n      defaultValue: DataType.UUIDV1,\n      primaryKey: true,\n    },\n\n    email: {\n      type: DataType.STRING(255),\n      validate: { isEmail: true },\n    },\n\n    emailConfirmed: {\n      type: DataType.BOOLEAN,\n      defaultValue: false,\n    },\n  },\n  {\n    indexes: [{ fields: ['email'] }],\n  },\n);\n\nexport default User;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserLogin = Model.define('UserLogin', {\n  name: {\n    type: DataType.STRING(50),\n    primaryKey: true,\n  },\n\n  key: {\n    type: DataType.STRING(100),\n    primaryKey: true,\n  },\n});\n\nexport default UserLogin;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserClaim = Model.define('UserClaim', {\n  type: {\n    type: DataType.STRING,\n  },\n\n  value: {\n    type: DataType.STRING,\n  },\n});\n\nexport default UserClaim;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport DataType from 'sequelize';\nimport Model from '../sequelize';\n\nconst UserProfile = Model.define('UserProfile', {\n  userId: {\n    type: DataType.UUID,\n    primaryKey: true,\n  },\n\n  displayName: {\n    type: DataType.STRING(100),\n  },\n\n  picture: {\n    type: DataType.STRING(255),\n  },\n\n  gender: {\n    type: DataType.STRING(50),\n  },\n\n  location: {\n    type: DataType.STRING(100),\n  },\n\n  website: {\n    type: DataType.STRING(255),\n  },\n});\n\nexport default UserProfile;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport sequelize from '../sequelize';\nimport User from './User';\nimport UserLogin from './UserLogin';\nimport UserClaim from './UserClaim';\nimport UserProfile from './UserProfile';\n\nUser.hasMany(UserLogin, {\n  foreignKey: 'userId',\n  as: 'logins',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nUser.hasMany(UserClaim, {\n  foreignKey: 'userId',\n  as: 'claims',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nUser.hasOne(UserProfile, {\n  foreignKey: 'userId',\n  as: 'profile',\n  onUpdate: 'cascade',\n  onDelete: 'cascade',\n});\n\nfunction sync(...args) {\n  return sequelize.sync(...args);\n}\n\nexport default { sync };\nexport { User, UserLogin, UserClaim, UserProfile };\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/**\n * Passport.js reference implementation.\n * The database schema used in this sample is available at\n * https://github.com/membership/membership.db/tree/master/postgres\n */\n\nimport passport from 'passport';\nimport { Strategy as FacebookStrategy } from 'passport-facebook';\nimport { User, UserLogin, UserClaim, UserProfile } from './data/models';\nimport config from './config';\n\n/**\n * Sign in with Facebook.\n */\npassport.use(\n  new FacebookStrategy(\n    {\n      clientID: config.auth.facebook.id,\n      clientSecret: config.auth.facebook.secret,\n      callbackURL: '/login/facebook/return',\n      profileFields: [\n        'displayName',\n        'name',\n        'email',\n        'link',\n        'locale',\n        'timezone',\n      ],\n      passReqToCallback: true,\n    },\n    (req, accessToken, refreshToken, profile, done) => {\n      /* eslint-disable no-underscore-dangle */\n      const loginName = 'facebook';\n      const claimType = 'urn:facebook:access_token';\n      const fooBar = async () => {\n        if (req.user) {\n          const userLogin = await UserLogin.findOne({\n            attributes: ['name', 'key'],\n            where: { name: loginName, key: profile.id },\n          });\n          if (userLogin) {\n            // There is already a Facebook account that belongs to you.\n            // Sign in with that account or delete it, then link it with your current account.\n            done();\n          } else {\n            const user = await User.create(\n              {\n                id: req.user.id,\n                email: profile._json.email,\n                logins: [{ name: loginName, key: profile.id }],\n                claims: [{ type: claimType, value: profile.id }],\n                profile: {\n                  displayName: profile.displayName,\n                  gender: profile._json.gender,\n                  picture: `https://graph.facebook.com/${\n                    profile.id\n                  }/picture?type=large`,\n                },\n              },\n              {\n                include: [\n                  { model: UserLogin, as: 'logins' },\n                  { model: UserClaim, as: 'claims' },\n                  { model: UserProfile, as: 'profile' },\n                ],\n              },\n            );\n            done(null, {\n              id: user.id,\n              email: user.email,\n            });\n          }\n        } else {\n          const users = await User.findAll({\n            attributes: ['id', 'email'],\n            where: { '$logins.name$': loginName, '$logins.key$': profile.id },\n            include: [\n              {\n                attributes: ['name', 'key'],\n                model: UserLogin,\n                as: 'logins',\n                required: true,\n              },\n            ],\n          });\n          if (users.length) {\n            const user = users[0].get({ plain: true });\n            done(null, user);\n          } else {\n            let user = await User.findOne({\n              where: { email: profile._json.email },\n            });\n            if (user) {\n              // There is already an account using this email address. Sign in to\n              // that account and link it with Facebook manually from Account Settings.\n              done(null);\n            } else {\n              user = await User.create(\n                {\n                  email: profile._json.email,\n                  emailConfirmed: true,\n                  logins: [{ name: loginName, key: profile.id }],\n                  claims: [{ type: claimType, value: accessToken }],\n                  profile: {\n                    displayName: profile.displayName,\n                    gender: profile._json.gender,\n                    picture: `https://graph.facebook.com/${\n                      profile.id\n                    }/picture?type=large`,\n                  },\n                },\n                {\n                  include: [\n                    { model: UserLogin, as: 'logins' },\n                    { model: UserClaim, as: 'claims' },\n                    { model: UserProfile, as: 'profile' },\n                  ],\n                },\n              );\n              done(null, {\n                id: user.id,\n                email: user.email,\n              });\n            }\n          }\n        }\n      };\n\n      fooBar().catch(done);\n    },\n  ),\n);\n\nexport default passport;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\n/* eslint-disable global-require */\n\n// The top-level (parent) route\nconst routes = {\n  path: '',\n\n  // Keep in mind, routes are evaluated in order\n  children: [\n    {\n      path: '',\n      load: () => import(/* webpackChunkName: 'home' */ './home'),\n    },\n    {\n      path: '/contact',\n      load: () => import(/* webpackChunkName: 'contact' */ './contact'),\n    },\n    {\n      path: '/login',\n      load: () => import(/* webpackChunkName: 'login' */ './login'),\n    },\n    {\n      path: '/register',\n      load: () => import(/* webpackChunkName: 'register' */ './register'),\n    },\n    {\n      path: '/about',\n      load: () => import(/* webpackChunkName: 'about' */ './about'),\n    },\n    {\n      path: '/privacy',\n      load: () => import(/* webpackChunkName: 'privacy' */ './privacy'),\n    },\n    {\n      path: '/admin',\n      load: () => import(/* webpackChunkName: 'admin' */ './admin'),\n    },\n\n    // Wildcard routes, e.g. { path: '(.*)', ... } (must go last)\n    {\n      path: '(.*)',\n      load: () => import(/* webpackChunkName: 'not-found' */ './not-found'),\n    },\n  ],\n\n  async action({ next }) {\n    // Execute each child route until one of them return the result\n    const route = await next();\n\n    // Provide default values for title, description etc.\n    route.title = `${route.title || 'Untitled Page'} - www.reactstarterkit.com`;\n    route.description = route.description || '';\n\n    return route;\n  },\n};\n\n// The error page is available by permanent url for development mode\nif (__DEV__) {\n  routes.children.unshift({\n    path: '/error',\n    action: require('./error').default,\n  });\n}\n\nexport default routes;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport { GraphQLList as List } from 'graphql';\nimport fetch from 'node-fetch';\nimport NewsItemType from '../types/NewsItemType';\n\n// React.js News Feed (RSS)\nconst url =\n  'https://api.rss2json.com/v1/api.json' +\n  '?rss_url=https%3A%2F%2Freactjsnews.com%2Ffeed.xml';\n\nlet items = [];\nlet lastFetchTask;\nlet lastFetchTime = new Date(1970, 0, 1);\n\nconst news = {\n  type: new List(NewsItemType),\n  resolve() {\n    if (lastFetchTask) {\n      return lastFetchTask;\n    }\n\n    if (new Date() - lastFetchTime > 1000 * 60 * 10 /* 10 mins */) {\n      lastFetchTime = new Date();\n      lastFetchTask = fetch(url)\n        .then(response => response.json())\n        .then(data => {\n          if (data.status === 'ok') {\n            items = data.items;\n          }\n\n          lastFetchTask = null;\n          return items;\n        })\n        .catch(err => {\n          lastFetchTask = null;\n          throw err;\n        });\n\n      if (items.length) {\n        return items;\n      }\n\n      return lastFetchTask;\n    }\n\n    return items;\n  },\n};\n\nexport default news;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport UniversalRouter from 'universal-router';\nimport routes from './routes';\n\nexport default new UniversalRouter(routes, {\n  resolveRoute(context, params) {\n    if (typeof context.route.load === 'function') {\n      return context.route\n        .load()\n        .then(action => action.default(context, params));\n    }\n    if (typeof context.route.action === 'function') {\n      return context.route.action(context, params);\n    }\n    return undefined;\n  },\n});\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport UserType from '../types/UserType';\n\nconst me = {\n  type: UserType,\n  resolve({ request }) {\n    return (\n      request.user && {\n        id: request.user.id,\n        email: request.user.email,\n      }\n    );\n  },\n};\n\nexport default me;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLObjectType as ObjectType,\n  GraphQLID as ID,\n  GraphQLString as StringType,\n  GraphQLNonNull as NonNull,\n} from 'graphql';\n\nconst UserType = new ObjectType({\n  name: 'User',\n  fields: {\n    id: { type: new NonNull(ID) },\n    email: { type: StringType },\n  },\n});\n\nexport default UserType;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLObjectType as ObjectType,\n  GraphQLString as StringType,\n  GraphQLNonNull as NonNull,\n} from 'graphql';\n\nconst NewsItemType = new ObjectType({\n  name: 'NewsItem',\n  fields: {\n    title: { type: new NonNull(StringType) },\n    link: { type: new NonNull(StringType) },\n    author: { type: StringType },\n    pubDate: { type: new NonNull(StringType) },\n    content: { type: StringType },\n  },\n});\n\nexport default NewsItemType;\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport {\n  GraphQLSchema as Schema,\n  GraphQLObjectType as ObjectType,\n} from 'graphql';\n\nimport me from './queries/me';\nimport news from './queries/news';\n\nconst schema = new Schema({\n  query: new ObjectType({\n    name: 'Query',\n    fields: {\n      me,\n      news,\n    },\n  }),\n});\n\nexport default schema;\n","/* eslint-disable import/prefer-default-export */\n\nexport const SET_RUNTIME_VARIABLE = 'SET_RUNTIME_VARIABLE';\n","import { combineReducers } from 'redux';\nimport user from './user';\nimport runtime from './runtime';\n\nexport default combineReducers({\n  user,\n  runtime,\n});\n","export default function user(state = {}, action) {\n  switch (action.type) {\n    default:\n      return state;\n  }\n}\n","import { SET_RUNTIME_VARIABLE } from '../constants';\n\nexport default function runtime(state = {}, action) {\n  switch (action.type) {\n    case SET_RUNTIME_VARIABLE:\n      return {\n        ...state,\n        [action.payload.name]: action.payload.value,\n      };\n    default:\n      return state;\n  }\n}\n","function createGraphqlRequest(fetch) {\n  return async function graphqlRequest(query, variables) {\n    const fetchConfig = {\n      method: 'post',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ query, variables }),\n      credentials: 'include',\n    };\n    const resp = await fetch('/graphql', fetchConfig);\n    if (resp.status !== 200) throw new Error(resp.statusText);\n    return resp.json();\n  };\n}\n\nexport default function createHelpers({ fetch, history }) {\n  return {\n    fetch,\n    history,\n    graphqlRequest: createGraphqlRequest(fetch),\n  };\n}\n","import { inspect } from 'util';\n\nfunction inspectObject(object) {\n  return inspect(object, {\n    colors: true,\n  });\n}\n\nfunction singleLine(str) {\n  return str.replace(/\\s+/g, ' ');\n}\n\nconst actionFormatters = {\n  // This is used at feature/apollo branch, but it can help you when implementing Apollo\n  APOLLO_QUERY_INIT: a =>\n    `queryId:${a.queryId} variables:${inspectObject(\n      a.variables,\n    )}\\n   ${singleLine(a.queryString)}`,\n\n  APOLLO_QUERY_RESULT: a =>\n    `queryId:${a.queryId}\\n   ${singleLine(inspectObject(a.result))}`,\n\n  APOLLO_QUERY_STOP: a => `queryId:${a.queryId}`,\n};\n\n// Server side redux action logger\nexport default function createLogger() {\n  // eslint-disable-next-line no-unused-vars\n  return store => next => action => {\n    let formattedPayload = '';\n    const actionFormatter = actionFormatters[action.type];\n    if (typeof actionFormatter === 'function') {\n      formattedPayload = actionFormatter(action);\n    } else if (action.toString !== Object.prototype.toString) {\n      formattedPayload = action.toString();\n    } else if (typeof action.payload !== 'undefined') {\n      formattedPayload = inspectObject(action.payload);\n    } else {\n      formattedPayload = inspectObject(action);\n    }\n\n    console.log(` * ${action.type}: ${formattedPayload}`); // eslint-disable-line no-console\n    return next(action);\n  };\n}\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\nimport { name, version } from '../../package.json';\nimport rootReducer from '../reducers';\nimport createHelpers from './createHelpers';\nimport createLogger from './logger';\n\nexport default function configureStore(initialState, helpersConfig) {\n  const helpers = createHelpers(helpersConfig);\n  const middleware = [thunk.withExtraArgument(helpers)];\n\n  let enhancer;\n\n  if (__DEV__) {\n    middleware.push(createLogger());\n\n    // https://github.com/zalmoxisus/redux-devtools-extension#14-using-in-production\n    const composeEnhancers = composeWithDevTools({\n      // Options: https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md#options\n      name: `${name}@${version}`,\n    });\n\n    // https://redux.js.org/docs/api/applyMiddleware.html\n    enhancer = composeEnhancers(applyMiddleware(...middleware));\n  } else {\n    enhancer = applyMiddleware(...middleware);\n  }\n\n  // https://redux.js.org/docs/api/createStore.html\n  const store = createStore(rootReducer, initialState, enhancer);\n\n  // Hot reload reducers (requires Webpack or Browserify HMR to be enabled)\n  if (__DEV__ && module.hot) {\n    module.hot.accept('../reducers', () =>\n      // eslint-disable-next-line global-require\n      store.replaceReducer(require('../reducers').default),\n    );\n  }\n\n  return store;\n}\n","/**\n * React Starter Kit (https://www.reactstarterkit.com/)\n *\n * Copyright © 2014-present Kriasoft, LLC. All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.txt file in the root directory of this source tree.\n */\n\nimport path from 'path';\nimport express from 'express';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport expressJwt, { UnauthorizedError as Jwt401Error } from 'express-jwt';\nimport { graphql } from 'graphql';\nimport expressGraphQL from 'express-graphql';\nimport jwt from 'jsonwebtoken';\nimport nodeFetch from 'node-fetch';\nimport React from 'react';\nimport ReactDOM from 'react-dom/server';\nimport PrettyError from 'pretty-error';\nimport App from './components/App';\nimport Html from './components/Html';\nimport { ErrorPageWithoutStyle } from './routes/error/ErrorPage';\nimport errorPageStyle from './routes/error/ErrorPage.css';\nimport createFetch from './createFetch';\nimport passport from './passport';\nimport router from './router';\nimport models from './data/models';\nimport schema from './data/schema';\n// import assets from './asset-manifest.json'; // eslint-disable-line import/no-unresolved\nimport chunks from './chunk-manifest.json'; // eslint-disable-line import/no-unresolved\nimport configureStore from './store/configureStore';\nimport { setRuntimeVariable } from './actions/runtime';\nimport config from './config';\n\nprocess.on('unhandledRejection', (reason, p) => {\n  console.error('Unhandled Rejection at:', p, 'reason:', reason);\n  // send entire app down. Process manager will restart it\n  process.exit(1);\n});\n\n//\n// Tell any CSS tooling (such as Material UI) to use all vendor prefixes if the\n// user agent is not known.\n// -----------------------------------------------------------------------------\nglobal.navigator = global.navigator || {};\nglobal.navigator.userAgent = global.navigator.userAgent || 'all';\n\nconst app = express();\n\n//\n// If you are using proxy from external machine, you can set TRUST_PROXY env\n// Default is to trust proxy headers only from loopback interface.\n// -----------------------------------------------------------------------------\napp.set('trust proxy', config.trustProxy);\n\n//\n// Register Node.js middleware\n// -----------------------------------------------------------------------------\napp.use(express.static(path.resolve(__dirname, 'public')));\napp.use(cookieParser());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\n//\n// Authentication\n// -----------------------------------------------------------------------------\napp.use(\n  expressJwt({\n    secret: config.auth.jwt.secret,\n    credentialsRequired: false,\n    getToken: req => req.cookies.id_token,\n  }),\n);\n// Error handler for express-jwt\napp.use((err, req, res, next) => {\n  // eslint-disable-line no-unused-vars\n  if (err instanceof Jwt401Error) {\n    console.error('[express-jwt-error]', req.cookies.id_token);\n    // `clearCookie`, otherwise user can't use web-app until cookie expires\n    res.clearCookie('id_token');\n  }\n  next(err);\n});\n\napp.use(passport.initialize());\n\napp.get(\n  '/login/facebook',\n  passport.authenticate('facebook', {\n    scope: ['email', 'user_location'],\n    session: false,\n  }),\n);\napp.get(\n  '/login/facebook/return',\n  passport.authenticate('facebook', {\n    failureRedirect: '/login',\n    session: false,\n  }),\n  (req, res) => {\n    const expiresIn = 60 * 60 * 24 * 180; // 180 days\n    const token = jwt.sign(req.user, config.auth.jwt.secret, { expiresIn });\n    res.cookie('id_token', token, { maxAge: 1000 * expiresIn, httpOnly: true });\n    res.redirect('/');\n  },\n);\n\n//\n// Register API middleware\n// -----------------------------------------------------------------------------\napp.use(\n  '/graphql',\n  expressGraphQL(req => ({\n    schema,\n    graphiql: __DEV__,\n    rootValue: { request: req },\n    pretty: __DEV__,\n  })),\n);\n\n//\n// Register server-side rendering middleware\n// -----------------------------------------------------------------------------\napp.get('*', async (req, res, next) => {\n  try {\n    const css = new Set();\n\n    // Enables critical path CSS rendering\n    // https://github.com/kriasoft/isomorphic-style-loader\n    const insertCss = (...styles) => {\n      // eslint-disable-next-line no-underscore-dangle\n      styles.forEach(style => css.add(style._getCss()));\n    };\n\n    // Universal HTTP client\n    const fetch = createFetch(nodeFetch, {\n      baseUrl: config.api.serverUrl,\n      cookie: req.headers.cookie,\n      schema,\n      graphql,\n    });\n\n    const initialState = {\n      user: req.user || null,\n    };\n\n    const store = configureStore(initialState, {\n      fetch,\n      // I should not use `history` on server.. but how I do redirection? follow universal-router\n    });\n\n    store.dispatch(\n      setRuntimeVariable({\n        name: 'initialNow',\n        value: Date.now(),\n      }),\n    );\n\n    // Global (context) variables that can be easily accessed from any React component\n    // https://facebook.github.io/react/docs/context.html\n    const context = {\n      insertCss,\n      fetch,\n      // The twins below are wild, be careful!\n      pathname: req.path,\n      query: req.query,\n      // You can access redux through react-redux connect\n      store,\n      storeSubscription: null,\n    };\n\n    const route = await router.resolve(context);\n\n    if (route.redirect) {\n      res.redirect(route.status || 302, route.redirect);\n      return;\n    }\n\n    const data = { ...route };\n    data.children = ReactDOM.renderToString(\n      <App context={context}>{route.component}</App>,\n    );\n    data.styles = [{ id: 'css', cssText: [...css].join('') }];\n\n    const scripts = new Set();\n    const addChunk = chunk => {\n      if (chunks[chunk]) {\n        chunks[chunk].forEach(asset => scripts.add(asset));\n      } else if (__DEV__) {\n        throw new Error(`Chunk with name '${chunk}' cannot be found`);\n      }\n    };\n    addChunk('client');\n    if (route.chunk) addChunk(route.chunk);\n    if (route.chunks) route.chunks.forEach(addChunk);\n\n    data.scripts = Array.from(scripts);\n    data.app = {\n      apiUrl: config.api.clientUrl,\n      state: context.store.getState(),\n    };\n\n    const html = ReactDOM.renderToStaticMarkup(<Html {...data} />);\n    res.status(route.status || 200);\n    res.send(`<!doctype html>${html}`);\n  } catch (err) {\n    next(err);\n  }\n});\n\n//\n// Error handling\n// -----------------------------------------------------------------------------\nconst pe = new PrettyError();\npe.skipNodeFiles();\npe.skipPackage('express');\n\n// eslint-disable-next-line no-unused-vars\napp.use((err, req, res, next) => {\n  console.error(pe.render(err));\n  const html = ReactDOM.renderToStaticMarkup(\n    <Html\n      title=\"Internal Server Error\"\n      description={err.message}\n      styles={[{ id: 'css', cssText: errorPageStyle._getCss() }]} // eslint-disable-line no-underscore-dangle\n    >\n      {ReactDOM.renderToString(<ErrorPageWithoutStyle error={err} />)}\n    </Html>,\n  );\n  res.status(err.status || 500);\n  res.send(`<!doctype html>${html}`);\n});\n\n//\n// Launch the server\n// -----------------------------------------------------------------------------\nconst promise = models.sync().catch(err => console.error(err.stack));\nif (!module.hot) {\n  promise.then(() => {\n    app.listen(config.port, () => {\n      console.info(`The server is running at http://localhost:${config.port}/`);\n    });\n  });\n}\n\n//\n// Hot Module Replacement\n// -----------------------------------------------------------------------------\nif (module.hot) {\n  app.hot = module.hot;\n  module.hot.accept('./router');\n}\n\nexport default app;\n","/* eslint-disable import/prefer-default-export */\n\nimport { SET_RUNTIME_VARIABLE } from '../constants';\n\nexport function setRuntimeVariable({ name, value }) {\n  return {\n    type: SET_RUNTIME_VARIABLE,\n    payload: {\n      name,\n      value,\n    },\n  };\n}\n","module.exports = require(\"redux-devtools-extension/developmentOnly\");","module.exports = require(\"babel-runtime/helpers/slicedToArray\");","module.exports = require(\"babel-runtime/core-js/json/stringify\");","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"html{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:0 32px;padding:0 2rem;height:100%;font-family:sans-serif;text-align:center;color:#888}body{margin:0}h1{font-weight:400;color:#555}pre{white-space:pre-wrap;text-align:left}\", \"\"]);\n\n// exports\n","module.exports = require(\"@babel/polyfill\");","module.exports = require(\"classnames\");","module.exports = require(\"history/createBrowserHistory\");"],"sourceRoot":""}